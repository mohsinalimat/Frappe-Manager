services:
  mailpit:
    image: axllent/mailpit:v1.22
    container_name: REPLACE_ME_WITH_CONTAINER_NAME
    volumes:
      - ./configs/mailpit/data:/data
    expose:
      - 1025
      - 8025
    networks:
      site-network:
    environment:
      MP_WEBROOT: mailpit
      MP_MAX_MESSAGES: 5000
      MP_DATABASE: /data/mailpit.db
      MP_SMTP_AUTH_ACCEPT_ANY: 1
      MP_SMTP_AUTH_ALLOW_INSECURE: 1

  rqdash:
    image: ghcr.io/rtcamp/frappe-manager-rqdash:v0.16.7
    command: --url-prefix /rqdash
    expose:
      - 9181
    environment:
      RQ_DASHBOARD_REDIS_URL: REPLACE_ME_WITH_REDIS_QUEUE_CONTAINER_NAME
    networks:
      site-network:

  adminer:
    image: adminer:4
    container_name: REPLACE_ME_WITH_CONTAINER_NAME
    expose:
      - 8080
    networks:
      site-network:
      global-backend-network:
    environment:
      ADMINER_DEFAULT_SERVER: global-db

networks:
  site-network:
    name: fm__SITE_NAME_PREFIX__site-network
  global-backend-network:
    name: fm-global-backend-network
    external: true
